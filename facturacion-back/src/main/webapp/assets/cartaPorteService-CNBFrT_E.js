import"./index-8WBuBtS6.js";const p=o=>o&&(o.length===16?`${o}:00`:o),C=o=>{if(!o)return o??null;const{estado:t,pais:n,codigoPostal:r}=o;if(!t||!n||!r)return null;const e={...o};if(n.trim().toUpperCase()==="MEX")if(delete e.colonia,delete e.localidad,delete e.municipio,e.codigoPostal){const a=e.codigoPostal.trim().replace(/\D/g,"");a.length===5?e.codigoPostal=a:a.length>5?e.codigoPostal=a.substring(0,5):a.length>0&&(e.codigoPostal=a.padStart(5,"0")),(!e.codigoPostal||e.codigoPostal.length!==5)&&(e.codigoPostal=l(e.estado))}else e.codigoPostal=l(e.estado);return e},l=o=>{if(!o||o.trim().length===0)return"01010";const t=o.trim().toUpperCase();return{AGUASCALIENTES:"20000","BAJA CALIFORNIA":"21100","BAJA CALIFORNIA SUR":"23000",CAMPECHE:"24000",CHIAPAS:"29000",CHIHUAHUA:"31000","CIUDAD DE MÉXICO":"01010","DISTRITO FEDERAL":"01010",CDMX:"01010",COAHUILA:"25000",COLIMA:"28000",DURANGO:"34000","ESTADO DE MÉXICO":"50000",MÉXICO:"50000",MEXICO:"50000",GUANAJUATO:"36000",GUERRERO:"39000",HIDALGO:"42000",JALISCO:"44100",MICHOACÁN:"58000",MICHOACAN:"58000",MORELOS:"62000",NAYARIT:"63000","NUEVO LEÓN":"64000","NUEVO LEON":"64000",OAXACA:"68000",PUEBLA:"72000",QUERÉTARO:"76000",QUERETARO:"76000","QUINTANA ROO":"77000","SAN LUIS POTOSÍ":"78000","SAN LUIS POTOSI":"78000",SINALOA:"80000",SONORA:"83000",TABASCO:"86000",TAMAULIPAS:"87000",TLAXCALA:"90000",VERACRUZ:"91000",YUCATÁN:"97000",YUCATAN:"97000",ZACATECAS:"98000"}[t]||"01010"},m=o=>{if(!o)return;const t=o.trim();if(t)return/^\d+$/.test(t)?t.padStart(2,"0").slice(-2):t.toUpperCase()};function I(o){const t=!!o.complemento.mercancias.transporteFerroviario,n=`${(o.rfcIniciales||"").toUpperCase()}${o.rfcFecha||""}${(o.rfcHomoclave||"").toUpperCase()}`;let r=null;n.length===12&&(r="moral"),n.length===13&&(r="fisica");const e=o.tipoPersona||r,a=o.tipoTransporte==="01";return{...o,tipoPersona:e,rfcIniciales:o.rfcIniciales.trim().toUpperCase(),rfcHomoclave:o.rfcHomoclave.trim().toUpperCase(),numeroSerie:o.numeroSerie.trim(),complemento:{...o.complemento,ubicaciones:o.complemento.ubicaciones.map(i=>{const c=m(i.tipoEstacion),A=c==="02",s=C(i.domicilio),d=t&&A?null:s;return{...i,tipoEstacion:a?void 0:c,fechaHoraSalidaLlegada:p(i.fechaHoraSalidaLlegada)||"",domicilio:a?s:d}}),mercancias:{...o.complemento.mercancias,mercancias:o.complemento.mercancias.mercancias.map(i=>({...i,cantidad:i.cantidad||"1",claveUnidad:i.claveUnidad||"H87",pesoEnKg:i.pesoEnKg||"0"})),autotransporte:o.complemento.mercancias.autotransporte,transporteFerroviario:o.complemento.mercancias.transporteFerroviario}}}}export{I as normalizeCartaPortePayload};
