# Sistema de Configuración de Menús Dinámico

## Descripción
Este sistema permite configurar dinámicamente la visibilidad de pestañas y pantallas específicas para diferentes perfiles de usuario.

## Características

### 1. Control de Pestañas Principales
- **Dashboard**: Página principal del sistema
- **Facturación**: Módulo de facturación
- **Consultas**: Módulo de consultas
- **Administración**: Módulo de administración
- **Reportes Facturación Fiscal**: Módulo de reportes
- **Registro CFDI**: Módulo de registro CFDI
- **Monitor**: Módulo de monitoreo
- **Configuración**: Módulo de configuración (solo para Administradores)

### 2. Control de Pantallas Específicas
Dentro de cada pestaña principal, se pueden controlar las pantallas individuales:

#### Facturación
- Intereses
- Carta Factura
- Global
- Monederos
- Captura Libre
- Cancelación Masiva
- Nóminas

#### Consultas
- Facturas
- SKU
- Boletas

#### Administración
- Empleados
- Tiendas
- Períodos Perfil
- Períodos Plataforma
- Kioscos
- Excepciones
- Secciones

#### Reportes Facturación Fiscal
- Reporte de Consulta Monederos
- Reporte de Ventas Máquina Corporativas Serely Polu
- Régimen de Facturación No Misma Boleta
- Y muchos más...

## Configuración por Perfil

### Operador de Crédito (ID_PERFIL = 1)
- Acceso a todas las pestañas excepto Configuración
- Control granular de pantallas dentro de cada pestaña

### Jefe de Crédito (ID_PERFIL = 2)
- Acceso a todas las pestañas excepto Configuración
- Control granular de pantallas dentro de cada pestaña

### Administrador (ID_PERFIL = 3)
- Acceso a todas las pestañas incluyendo Configuración
- Control granular de pantallas dentro de cada pestaña
- Capacidad de modificar configuraciones para otros perfiles

## Endpoints del Backend

### Pestañas Principales
- `GET /api/menu-config/perfil/{idPerfil}` - Obtener pestañas para un perfil
- `PUT /api/menu-config/visibilidad/{idConfig}` - Actualizar visibilidad de pestaña
- `PUT /api/menu-config/orden/{idConfig}` - Actualizar orden de pestaña

### Pantallas Específicas
- `GET /api/menu-config/pantallas/{idPerfil}` - Obtener pantallas para un perfil
- `PUT /api/menu-config/pantalla-visibilidad/{idConfig}` - Actualizar visibilidad de pantalla
- `PUT /api/menu-config/pantalla-orden/{idConfig}` - Actualizar orden de pantalla

## Scripts de Base de Datos

### 1. SETUP_COMPLETE_MENU_SYSTEM.sql
Script completo que configura todo el sistema de menús con pestañas y pantallas.

### 2. INSERT_PANTALLAS_CONFIG.sql
Script específico para insertar configuraciones de pantallas.

## Uso en el Frontend

### Componente ConfiguracionMenusPage
- Interfaz para administradores
- Permite seleccionar perfil
- Control de visibilidad de pestañas
- Control de visibilidad de pantallas específicas
- Reordenamiento de elementos

### Funcionalidades
1. **Selección de Perfil**: Dropdown para elegir el perfil a configurar
2. **Pestañas Principales**: Lista con toggles de visibilidad y botones de orden
3. **Pantallas Específicas**: Lista expandible con toggles de visibilidad
4. **Reordenamiento**: Botones para mover elementos arriba/abajo
5. **Feedback Visual**: Mensajes de éxito/error y estados de carga

## Estructura de la Base de Datos

### Tabla MENU_CONFIG
```sql
CREATE TABLE MENU_CONFIG (
    ID_CONFIG NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ID_PERFIL NUMBER NOT NULL,
    MENU_LABEL VARCHAR2(100) NOT NULL,
    MENU_PATH VARCHAR2(200),
    IS_VISIBLE NUMBER(1) DEFAULT 1,
    ORDEN NUMBER DEFAULT 0,
    FECHA_CREACION DATE DEFAULT SYSDATE,
    FECHA_MODIFICACION DATE DEFAULT SYSDATE,
    USUARIO_CREACION VARCHAR2(50),
    USUARIO_MODIFICACION VARCHAR2(50),
    CONSTRAINT FK_MENU_CONFIG_PERFIL FOREIGN KEY (ID_PERFIL) REFERENCES PERFIL(ID_PERFIL)
);
```

### Campos
- **ID_CONFIG**: Identificador único
- **ID_PERFIL**: Referencia al perfil de usuario
- **MENU_LABEL**: Etiqueta del menú
- **MENU_PATH**: Ruta del menú (NULL para pestañas principales)
- **IS_VISIBLE**: Visibilidad (1=visible, 0=oculto)
- **ORDEN**: Orden de aparición
- **FECHA_CREACION**: Fecha de creación
- **FECHA_MODIFICACION**: Fecha de última modificación
- **USUARIO_CREACION**: Usuario que creó el registro
- **USUARIO_MODIFICACION**: Usuario que modificó el registro

## Instalación

1. Ejecutar `SETUP_COMPLETE_MENU_SYSTEM.sql` en la base de datos
2. Reiniciar el backend para cargar los nuevos controladores
3. Acceder a la página de configuración como administrador
4. Configurar la visibilidad según las necesidades del negocio

## Notas Importantes

- Solo los administradores pueden acceder a la configuración
- Los cambios se aplican inmediatamente
- Se mantiene un historial de modificaciones
- El sistema es completamente dinámico y configurable
- Se puede agregar nuevas pestañas y pantallas fácilmente
