# üöÄ Instalaci√≥n Completa del Sistema de Facturaci√≥n

## üìã Requisitos Previos

### Base de Datos
- **Oracle Database** (versi√≥n 11g o superior)
- **Usuario con permisos** para crear tablas, √≠ndices y insertar datos
- **Conexi√≥n activa** a la base de datos

### Backend (Java)
- **Java 17** o superior
- **Maven 3.6+**
- **Spring Boot 2.7+**

### Frontend (React)
- **Node.js 16+**
- **npm 8+** o **yarn 1.22+**

## üóÑÔ∏è Instalaci√≥n de Base de Datos

### Paso 1: Ejecutar Script de Instalaci√≥n
```sql
-- Conectar a Oracle como usuario con permisos
sqlplus tu_usuario/tu_password@localhost:1521/XE

-- Ejecutar el script completo
@INSTALLATION_COMPLETE_SYSTEM.sql
```

### Paso 2: Verificar Instalaci√≥n
```sql
-- Verificar que se crearon las tablas
SELECT table_name FROM user_tables WHERE table_name IN ('PERFIL', 'USUARIOS', 'MENU_CONFIG');

-- Verificar usuarios creados
SELECT no_usuario, nombre_empleado, id_perfil FROM usuarios;

-- Verificar configuraci√≥n de men√∫s
SELECT COUNT(*) as total_configuraciones FROM menu_config;
```

## üîß Configuraci√≥n del Backend

### Paso 1: Configurar Base de Datos
Editar `src/main/resources/application.yml`:
```yaml
spring:
  datasource:
    url: jdbc:oracle:thin:@localhost:1521:XE
    username: tu_usuario
    password: tu_password
    driver-class-name: oracle.jdbc.OracleDriver
```

### Paso 2: Instalar Dependencias
```bash
cd facturacion-backend/facturacion-back
mvn clean install
```

### Paso 3: Ejecutar Backend
```bash
mvn spring-boot:run
```

**Verificar**: El backend debe estar disponible en `http://localhost:8080`

## ‚öõÔ∏è Configuraci√≥n del Frontend

### Paso 1: Instalar Dependencias
```bash
cd facturacion-cibercom
npm install
```

### Paso 2: Ejecutar Frontend
```bash
npm run dev
```

**Verificar**: El frontend debe estar disponible en `http://localhost:5173`

## üë• Usuarios del Sistema

| Usuario | Contrase√±a | Perfil | Descripci√≥n |
|---------|-----------|--------|-------------|
| `admin` | `admin123` | Administrador | Acceso completo, puede configurar men√∫s |
| `jefe` | `jefe123` | Jefe de Cr√©dito | Acceso a administraci√≥n y reportes |
| `operador` | `operador123` | Operador de Cr√©dito | Acceso b√°sico a facturaci√≥n y consultas |

## üéØ Funcionalidades Principales

### ‚úÖ Sistema de Men√∫s Din√°micos
- **Configuraci√≥n por perfil**: Cada perfil ve diferentes men√∫s
- **Visibilidad configurable**: El administrador puede habilitar/deshabilitar pesta√±as y pantallas
- **30 pantallas de reportes**: 11 originales + 19 nuevas

### ‚úÖ Perfiles de Usuario
- **Operador de Cr√©dito**: Facturaci√≥n, Consultas, Reportes, Registro CFDI, Monitor
- **Jefe de Cr√©dito**: Todo lo anterior + Administraci√≥n
- **Administrador**: Acceso completo + Configuraci√≥n de men√∫s

### ‚úÖ Configuraci√≥n Din√°mica
- **Panel de administraci√≥n**: Configuraci√≥n ‚Üí Configuraci√≥n de Men√∫s
- **Control granular**: Habilitar/deshabilitar pesta√±as y pantallas espec√≠ficas
- **Persistencia**: Los cambios se guardan en la base de datos

## üîç Verificaci√≥n del Sistema

### 1. Login y Navegaci√≥n
- Iniciar sesi√≥n con `admin/admin123`
- Verificar que aparecen todas las pesta√±as
- Navegar a "Configuraci√≥n" ‚Üí "Configuraci√≥n de Men√∫s"

### 2. Configuraci√≥n de Men√∫s
- Seleccionar un perfil (ej: "Jefe de Credito")
- Verificar que aparecen las pesta√±as principales
- Hacer clic en el engranaje de "Reportes Facturaci√≥n Fiscal"
- Verificar que aparecen las 30 pantallas con toggles

### 3. Filtrado Din√°mico
- Deshabilitar algunas pantallas en la configuraci√≥n
- Cambiar a otro perfil y verificar que las pantallas se ocultan
- Verificar que los cambios persisten al recargar la p√°gina

## üõ†Ô∏è Soluci√≥n de Problemas

### Error de Conexi√≥n a Base de Datos
```bash
# Verificar que Oracle est√© ejecut√°ndose
sqlplus system/password@localhost:1521/XE

# Verificar la configuraci√≥n en application.yml
```

### Error de Puerto en Uso
```bash
# Backend (puerto 8080)
netstat -ano | findstr :8080
taskkill /PID <PID> /F

# Frontend (puerto 5173)
netstat -ano | findstr :5173
taskkill /PID <PID> /F
```

### Error de CORS
- Verificar que el backend tenga `@CrossOrigin(origins = "http://localhost:5173")`
- Verificar que el frontend est√© en el puerto 5173

## üìä Estructura de la Base de Datos

### Tabla PERFIL
- `ID_PERFIL`: Identificador √∫nico del perfil
- `NOMBRE_PERFIL`: Nombre del perfil (Operador de Credito, Jefe de Credito, Administrador)

### Tabla USUARIOS
- `NO_USUARIO`: Usuario de login
- `PASSWORD`: Contrase√±a (en texto plano para desarrollo)
- `ID_PERFIL`: Referencia al perfil del usuario

### Tabla MENU_CONFIG
- `ID_CONFIG`: Identificador √∫nico de la configuraci√≥n
- `ID_PERFIL`: Perfil al que pertenece la configuraci√≥n
- `MENU_LABEL`: Nombre de la pesta√±a o pantalla
- `MENU_PATH`: Ruta de la pantalla (NULL para pesta√±as principales)
- `IS_VISIBLE`: 1 = visible, 0 = oculto
- `ORDEN`: Orden de aparici√≥n en el men√∫

## üéâ ¬°Sistema Listo!

Una vez completados todos los pasos, tendr√°s un sistema de facturaci√≥n completamente funcional con:

- ‚úÖ **3 perfiles de usuario** con diferentes niveles de acceso
- ‚úÖ **Sistema de men√∫s din√°micos** configurable por administrador
- ‚úÖ **30 pantallas de reportes fiscales** (11 originales + 19 nuevas)
- ‚úÖ **Panel de administraci√≥n** para configurar visibilidad
- ‚úÖ **Persistencia de configuraci√≥n** en base de datos

**¬°Disfruta tu nuevo sistema de facturaci√≥n!** üöÄ
